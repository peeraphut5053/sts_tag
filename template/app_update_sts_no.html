<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<style>
    .input-group-addon{
        width:100px !important;
    }
    .row{
        padding-top: 5px
    }
</style>
<html>
    <head>
        <link type="text/css" href="./css/bootstrap.css" rel="stylesheet" />	
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <div class='col-xs-offset-1'>

            <div class="row">
                <div class="col-xs-11 col-xs-offset-1">
                    <div class="input-group">
                        <input type="text" autocomplete="off" value='' placeholder="barcode id"  class="form-control txt-filter" id ='tag_id' name='tag_id'  >
                        <div class="input-group-addon">
                            <input type='button' value="Search" onclick="tag_scan()" />
                        </div>
                    </div>
                </div>
            </div>
            <div class="row" style="padding-top: 15px;">

                <div class="col-xs-11 col-xs-offset-1">
                    <div class="input-group">
                        <div class="input-group-addon">Lot</div>
                        <input type="text" autocomplete="off"  class="form-control txt-filter" id ='lot' name ='lot'  >
                    </div>
                </div>
            </div>
            <div class="row" style="padding-top: 15px;">
                <div class="col-xs-1" >
                    Web Tag
                </div>
                <div class="col-xs-11">
                    <div class="row">
                        <div class="col-xs-6">
                            <div class="input-group">
                                <div class="input-group-addon">sts_no</div>
                                <input type="text" autocomplete="off"  class="form-control txt-filter" id ='w_sts_no' name ='w_sts_no' maxlength="5">
                            </div>
                        </div>
                        <div class="col-xs-6">
                            <div class="input-group">
                                <div class="input-group-addon">qty_sts_no</div>
                                <input  value="0" type="text" autocomplete="off"  class="form-control txt-filter" id ='w_qty_sts_no' name ='w_qty_sts_no' >
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-6">
                            <div class="input-group">
                                <div class="input-group-addon">sts_no2</div>
                                <input type="text" autocomplete="off"  class="form-control txt-filter" id ='w_sts_no2' name ='w_sts_no2'  maxlength="5">
                            </div>
                        </div>
                        <div class="col-xs-6">
                            <div class="input-group">
                                <div class="input-group-addon">qty_sts_no2</div>
                                <input  value="0" type="number" autocomplete="off"  class="form-control txt-filter" id ='w_qty_sts_no2' name ='w_qty_sts_no2' >
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-6">
                            <div class="input-group">
                                <div class="input-group-addon">sts_no3</div>
                                <input type="text" autocomplete="off"  class="form-control txt-filter" id ='w_sts_no3' name ='w_sts_no3' maxlength="5">
                            </div>
                        </div>

                        <div class="col-xs-6">
                            <div class="input-group">
                                <div class="input-group-addon">qty_sts_no3</div>
                                <input  value="0" type="number" autocomplete="off"  class="form-control txt-filter" id ='w_qty_sts_no3' name ='w_qty_sts_no3'  >
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <div class="row" style="padding-top: 25px;">
                <div class="col-xs-1" >
                    infor Syteline
                </div>
                <div class="col-xs-11">
                    <div class="row">
                        <div class="col-xs-6">
                            <div class="input-group">
                                <div class="input-group-addon">sts_no</div>
                                <input readonly type="text" autocomplete="off"  class="form-control txt-filter" id ='s_sts_no'  >
                            </div>
                        </div>
                        <div class="col-xs-6">
                            <div class="input-group">
                                <div class="input-group-addon">qty_sts_no</div>
                                <input readonly type="text" autocomplete="off"  class="form-control txt-filter" id ='s_qty_sts_no'  >
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-6">
                            <div class="input-group">
                                <div class="input-group-addon">sts_no2</div>
                                <input readonly type="text" autocomplete="off"  class="form-control txt-filter" id ='s_sts_no2'  >
                            </div>
                        </div>
                        <div class="col-xs-6">
                            <div class="input-group">
                                <div class="input-group-addon">qty_sts_no2</div>
                                <input readonly type="text" autocomplete="off"  class="form-control txt-filter" id ='s_qty_sts_no2'  >
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-6">
                            <div class="input-group">
                                <div class="input-group-addon">sts_no3</div>
                                <input readonly type="text" autocomplete="off"  class="form-control txt-filter" id ='s_sts_no3'  >
                            </div>
                        </div>
                        <div class="col-xs-6">
                            <div class="input-group">
                                <div class="input-group-addon">qty_sts_no3</div>
                                <input readonly type="text" autocomplete="off"  class="form-control txt-filter" id ='s_qty_sts_no3'  >
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row" style="padding-top: 25px;text-align: center;">
                <input onclick="updateStsNo()" type="button" class="btn btn-success " value="Save">
                <input onclick="clearTextBox()" type="button" class="btn btn btn-default " value="Clear">
            </div>
            <div> 
                <h5 style="color: red;"> ***กรณีมีการแบ่ง tag ห้ามเปลี่ยนเลข sts_no</h5>
                <h5 style="color: red;"> ***กรณี Lot ที่มีเลข sts_no มากกว่า 1 ให้ใส่ข้อมูลที่ช่อง sts_no2, sts_no3 และใส่จำนวนที่ช่อง qty_sts_no2, qty_sts_no3</h5>
            </div>
        </div>
        <script>




            var url = 'module/app_update_sts_no/data.php';
            $('#tag_id').keypress(function (e) {
                let key = e.which;
                if (key == 13) // the enter key code
                {
                    tag_scan()
                    return false;
                }
            });
            function clearTextBox() {
                $("input[type=text]").val("");
            }

            function tag_scan() {
                let tag_id = $('#tag_id').val();
                if (tag_id == "") {
                    alert("Enter barcode id");
                } else {
                    $.ajax({
                        type: "get",
                        url: url,
                        dataType: 'json',
                        data: {
                            load: "GetStsNo",
                            tag_id: tag_id,
                        },
                        success: function (data) {
                            let{lot, sts_no, sts_no2, sts_no3,
                                qty_sts_no, qty_sts_no2, qty_sts_no3,
                                s_sts_no, s_sts_no2, s_sts_no3,
                                s_qty_sts_no, s_qty_sts_no2, s_qty_sts_no3,
                            } = data[0];
                            $("#lot").val(lot);
                            $("#w_sts_no").val(sts_no);
                            $("#w_sts_no2").val(sts_no2);
                            $("#w_sts_no3").val(sts_no3);
                            $("#w_qty_sts_no").val(qty_sts_no);
                            $("#w_qty_sts_no2").val(qty_sts_no2);
                            $("#w_qty_sts_no3").val(qty_sts_no3);
                            $("#s_sts_no").val(s_sts_no);
                            $("#s_sts_no2").val(s_sts_no2);
                            $("#s_sts_no3").val(s_sts_no3);
                            $("#s_qty_sts_no").val(s_qty_sts_no);
                            $("#s_qty_sts_no2").val(s_qty_sts_no2);
                            $("#s_qty_sts_no3").val(s_qty_sts_no3);
                            console.log(data)
                        }
                    });
                }
            }
            $("#updateStsNo").click(function () {
                updateStsNo();
            });
            function updateStsNo() {
                let tag_id = $("#tag_id").val();
                let lot = $("#lot").val();
                let w_sts_no = $("#w_sts_no").val();
                let w_sts_no2 = $("#w_sts_no2").val();
                let w_sts_no3 = $("#w_sts_no3").val();
                let w_qty_sts_no = $("#w_qty_sts_no").val();
                let w_qty_sts_no2 = $("#w_qty_sts_no2").val();
                let w_qty_sts_no3 = $("#w_qty_sts_no3").val();
                if ((w_sts_no2 != '' && w_qty_sts_no2 <= 0 ) || (w_sts_no3 != '' && w_qty_sts_no3 <=0)){
                    alert("กรุณากรอกจำนวน qty_sts_no2");
                } else {
                    if (tag_id != '' && lot != '')  {
                        $.ajax({
                            type: "post",
                            url: url,
                            dataType: 'json',
                            data: {
                                load: "updateStsNo",
                                lot: lot,
                                id: tag_id,
                                w_sts_no: w_sts_no,
                                w_sts_no2: w_sts_no2,
                                w_sts_no3: w_sts_no3,
                                w_qty_sts_no: w_qty_sts_no,
                                w_qty_sts_no2: w_qty_sts_no2,
                                w_qty_sts_no3: w_qty_sts_no3,
                            },
                            success: function (data) {
                                console.log(data)
                                tag_scan();
                            }
                        });
                    } else {
                        alert("กรอกข้อมูลไม่ครบ");
                    }
                }

            }
        </script>



    </body>
</html>
